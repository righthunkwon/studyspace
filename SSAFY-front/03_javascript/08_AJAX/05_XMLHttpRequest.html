<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>XMLHttpRequest실습</title>
  </head>
  <body>
    <!-- https://dog.ceo/api/breeds/image/random 한번 해보기! -->
    <h2>서버에 요청을 보내고 JSON 데이터를 받아 화면에 출력하자</h2>
    <div id="view"></div>
    <button id="submit">요청</button>

    <script>
      let xhr;
      document.querySelector("#submit").addEventListener("click", function () {
        xhr = new XMLHttpRequest();
        xhr.onreadystatechange = responseMsg;
        xhr.open("GET", "./data/member.json", true); // json data
        xhr.send();
      });

      function responseMsg() {
        if (xhr.readyState == 4) {
          if (xhr.status == 200) {
            let studentList = JSON.parse(xhr.response);
            console.log(studentList); // 배열 출력
            // 배열이 넘어왔으니 요소를 반복문을 돌면서 화면에 추가하면 된다.
          } else {
            console.log("정상적으로 데이터를 받지 못했습니다.");
          }
        }
      }
    </script>
  </body>
</html>
